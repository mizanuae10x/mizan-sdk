<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Mizan Studio</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="mobile.css">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Inter',sans-serif;background:#060C18;color:#fff;display:flex;min-height:100vh}
.sidebar{width:240px;background:#0B1F3A;padding:24px 0;display:flex;flex-direction:column;position:fixed;height:100vh;z-index:10}
.sidebar .logo{padding:0 24px 24px;font-size:22px;font-weight:700;color:#D4AF37;border-bottom:1px solid rgba(212,175,55,.2)}
.sidebar nav{flex:1;padding:16px 0}
.sidebar nav a{display:flex;align-items:center;gap:10px;padding:12px 24px;color:rgba(255,255,255,.7);text-decoration:none;font-size:14px;transition:all .2s}
.sidebar nav a:hover,.sidebar nav a.active{color:#D4AF37;background:rgba(212,175,55,.08)}
.sidebar nav a.active{border-right:3px solid #D4AF37}
.sidebar .version{padding:16px 24px;font-size:12px;color:rgba(255,255,255,.3);border-top:1px solid rgba(212,175,55,.1)}
.main{margin-left:240px;flex:1;padding:40px}
.hamburger{display:none;position:fixed;top:16px;left:16px;z-index:20;background:#0B1F3A;border:1px solid rgba(212,175,55,.3);color:#D4AF37;font-size:24px;padding:8px 12px;border-radius:8px;cursor:pointer}
.overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);z-index:9}
.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;max-width:1000px;margin:0 auto 40px}
.stat-card{background:rgba(11,31,58,.8);border:1px solid rgba(212,175,55,.15);border-radius:12px;padding:24px;text-align:center}
.stat-card .icon{font-size:28px;margin-bottom:8px}
.stat-card .value{font-size:36px;font-weight:700;color:#D4AF37}
.stat-card .label{font-size:13px;color:rgba(255,255,255,.5);margin-top:4px}
.hero{text-align:center;padding:60px 20px 40px}
.hero h1{font-size:42px;font-weight:700;margin-bottom:12px}
.hero h1 .gold{color:#D4AF37}
.hero p{font-size:16px;color:rgba(255,255,255,.5);max-width:500px;margin:0 auto 32px}
.quick-actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-bottom:50px}
.btn{display:inline-block;padding:12px 28px;background:#D4AF37;color:#0B1F3A;font-weight:600;border-radius:8px;text-decoration:none;font-size:14px;border:none;cursor:pointer;transition:all .2s}
.btn:hover{background:#c9a430;transform:translateY(-1px)}
.btn-outline{background:transparent;border:1px solid rgba(212,175,55,.4);color:#D4AF37}
.btn-outline:hover{background:rgba(212,175,55,.1)}
.status-bar{background:rgba(11,31,58,.6);border:1px solid rgba(212,175,55,.1);border-radius:8px;padding:12px 24px;display:flex;justify-content:center;gap:24px;max-width:600px;margin:0 auto 50px;font-size:13px;color:rgba(255,255,255,.5)}
.status-bar .dot{width:8px;height:8px;border-radius:50%;display:inline-block;margin-right:6px}
.dot-green{background:#34d399}
.dot-yellow{background:#fbbf24}
.getting-started{max-width:800px;margin:0 auto}
.getting-started h2{font-size:24px;margin-bottom:24px;color:#D4AF37}
.steps{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
.step-card{background:rgba(11,31,58,.6);border:1px solid rgba(212,175,55,.1);border-radius:12px;padding:24px}
.step-card .num{display:inline-block;width:32px;height:32px;background:rgba(212,175,55,.15);color:#D4AF37;border-radius:50%;text-align:center;line-height:32px;font-weight:700;font-size:14px;margin-bottom:12px}
.step-card h3{font-size:16px;margin-bottom:8px}
.step-card p{font-size:13px;color:rgba(255,255,255,.5);line-height:1.5}
.footer{text-align:center;padding:40px;font-size:12px;color:rgba(255,255,255,.25)}
</style>
</head>
<body>
<script>
(function(){
  var t=localStorage.getItem("mizanStudioToken");
  if(!t){window.location.href="/login.html";return;}
  fetch("/api/auth/me",{headers:{"Authorization":"Bearer "+t}})
    .then(function(r){if(r.status===401){localStorage.removeItem("mizanStudioToken");window.location.href="/login.html";}})
    .catch(function(){});
})();
</script>

<div class="hamburger" onclick="toggleSidebar()">â˜°</div>
<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>
<div class="sidebar" id="sidebar">
  <div class="logo">âš–ï¸ Mizan Studio</div>
  <nav>
    <a href="index.html" class="active">ğŸ  Home</a>
    <a href="rules.html">ğŸ“‹ Rule Editor</a>
    <a href="decide.html">âš¡ Decision Tester</a>
    <a href="audit.html">ğŸ“Š Audit Log</a>
    <a href="agents.html">ğŸ¤– Agent Monitor</a>
    <a href="compliance.html"><span>ğŸ‡¦ğŸ‡ª</span> UAE Compliance</a>
    <a href="rag.html"><span>ğŸ“š</span> Knowledge Base</a>
    <a href="widget-demo.html"><span>ğŸ”Œ</span> Widget Demo</a>
    <a href="webhooks.html"><span>ğŸ”—</span> Webhooks</a>
    <a href="orchestration.html"><span>ğŸ”€</span> Multi-Agent</a>
    <a href="setup.html">âš™ï¸ Setup</a>
  <div style="position:absolute;bottom:20px;left:0;right:0;padding:0 12px;z-index:10;">
  <div style="background:#060C18;border:1px solid rgba(212,175,55,0.12);border-radius:10px;padding:12px;font-size:13px;text-align:center;">
    <div id="nav-user-name" style="color:#D4AF37;font-weight:600;margin-bottom:2px;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">Ù…ÙŠØ²Ø§Ù†</div>
    <div id="nav-user-email" style="font-size:11px;color:#475569;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"></div>
    <button id="nav-logout-btn" style="background:#D4AF37;color:#060C18;border:none;border-radius:6px;padding:5px 0;cursor:pointer;font-size:12px;font-weight:700;width:100%;font-family:inherit;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
  </div>
</div>
<script>
(function(){
  var t=localStorage.getItem("mizanStudioToken");
  if(!t)return;
  fetch("/api/auth/me",{headers:{"Authorization":"Bearer "+t}})
    .then(function(r){return r.json();})
    .then(function(d){
      if(d.user){
        var n=document.getElementById("nav-user-name");
        var e=document.getElementById("nav-user-email");
        if(n)n.textContent=d.user.name||"Admin";
        if(e)e.textContent=d.user.email||"";
      }
    }).catch(function(){});
  var btn=document.getElementById("nav-logout-btn");
  if(btn)btn.onclick=function(){
    var tok=localStorage.getItem("mizanStudioToken")||"";
    localStorage.removeItem("mizanStudioToken");
    fetch("/api/auth/logout",{method:"POST",headers:{"Authorization":"Bearer "+tok}});
    window.location.href="/login.html";
  };
})();
</script>
</nav>
  <div class="version">ğŸ“¦ v1.1.0</div>
</div>
<div class="main">
  <div class="hero">
    <h1>Welcome to <span class="gold">Mizan Studio</span></h1>
    <p>Your local AI governance dashboard</p>
  </div>
  <div class="stats-grid" id="stats">
    <div class="stat-card"><div class="icon">ğŸ“‹</div><div class="value" id="rulesCount">â€”</div><div class="label">Total Rules</div></div>
    <div class="stat-card"><div class="icon">âš¡</div><div class="value" id="decisionsToday">â€”</div><div class="label">Decisions Today</div></div>
    <div class="stat-card"><div class="icon">ğŸ¤–</div><div class="value" id="agentsRunning">â€”</div><div class="label">Agents Running</div></div>
    <div class="stat-card"><div class="icon">ğŸ“Š</div><div class="value" id="auditEntries">â€”</div><div class="label">Audit Entries</div></div>
  </div>
  <div class="quick-actions">
    <a href="rules.html" class="btn">+ Add Rule</a>
    <a href="decide.html" class="btn btn-outline">âš¡ Test Decision</a>
    <a href="audit.html" class="btn btn-outline">ğŸ“Š View Audit</a>
  </div>
  <div class="status-bar" id="statusBar">
    <span><span class="dot dot-green"></span> SDK v1.1.0</span>
    <span id="envStatus"><span class="dot dot-yellow"></span> Checking .env...</span>
  </div>
  <div class="getting-started">
    <h2>ğŸš€ Getting Started</h2>
    <div class="steps">
      <div class="step-card"><div class="num">1</div><h3>Add Rules</h3><p>Define governance rules with conditions and actions. Use the Rule Editor to create IF/THEN logic.</p></div>
      <div class="step-card"><div class="num">2</div><h3>Test Decisions</h3><p>Submit facts through the Decision Tester to see which rules fire and what action is taken.</p></div>
      <div class="step-card"><div class="num">3</div><h3>Monitor & Audit</h3><p>Review all decisions in the Audit Log. Track agents and configure your environment in Setup.</p></div>
    </div>
  </div>
  <div class="footer">âš–ï¸ Mizan Framework SDK v1.1.0 | Built by mizanuae10x</div>
</div>
<script>
function toggleSidebar(){document.getElementById('sidebar').classList.toggle('open');document.getElementById('overlay').classList.toggle('show')}
async function loadStats(){
  try{
    const r=await fetch('/api/stats');const s=await r.json();
    document.getElementById('rulesCount').textContent=s.rulesCount||0;
    document.getElementById('decisionsToday').textContent=s.decisionsToday||0;
    document.getElementById('agentsRunning').textContent=s.agentsRunning||0;
    document.getElementById('auditEntries').textContent=s.auditEntries||0;
  }catch{document.getElementById('rulesCount').textContent='0'}
  try{
    const e=await fetch('/api/env');const vars=await e.json();
    const set=vars.filter(v=>v.isSet).length;
    document.getElementById('envStatus').innerHTML=set===vars.length
      ?'<span class="dot dot-green"></span> All keys configured'
      :'<span class="dot dot-yellow"></span> '+set+'/'+vars.length+' keys configured';
  }catch{}
}
loadStats();
</script>
</body>
</html>
