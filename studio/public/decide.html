<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Decision Tester ‚Äî Mizan Studio</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="mobile.css">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Inter',sans-serif;background:#060C18;color:#fff;display:flex;min-height:100vh}
.sidebar{width:240px;background:#0B1F3A;padding:24px 0;display:flex;flex-direction:column;position:fixed;height:100vh;z-index:10}
.sidebar .logo{padding:0 24px 24px;font-size:22px;font-weight:700;color:#D4AF37;border-bottom:1px solid rgba(212,175,55,.2)}
.sidebar nav{flex:1;padding:16px 0}
.sidebar nav a{display:flex;align-items:center;gap:10px;padding:12px 24px;color:rgba(255,255,255,.7);text-decoration:none;font-size:14px;transition:all .2s}
.sidebar nav a:hover,.sidebar nav a.active{color:#D4AF37;background:rgba(212,175,55,.08)}
.sidebar nav a.active{border-right:3px solid #D4AF37}
.sidebar .version{padding:16px 24px;font-size:12px;color:rgba(255,255,255,.3);border-top:1px solid rgba(212,175,55,.1)}
.main{margin-left:240px;flex:1;padding:40px;max-width:900px}
.hamburger{display:none;position:fixed;top:16px;left:16px;z-index:20;background:#0B1F3A;border:1px solid rgba(212,175,55,.3);color:#D4AF37;font-size:24px;padding:8px 12px;border-radius:8px;cursor:pointer}
.overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);z-index:9}
h1{font-size:28px;margin-bottom:8px}
.subtitle{color:rgba(255,255,255,.5);margin-bottom:24px;font-size:14px}
.btn{padding:10px 24px;background:#D4AF37;color:#0B1F3A;font-weight:600;border-radius:8px;border:none;cursor:pointer;font-size:14px;transition:all .2s}
.btn:hover{background:#c9a430}
.btn-outline{background:transparent;border:1px solid rgba(212,175,55,.4);color:#D4AF37}
.tester{background:rgba(11,31,58,.6);border:1px solid rgba(212,175,55,.15);border-radius:16px;padding:32px;margin-bottom:24px}
.tester h2{font-size:18px;color:#D4AF37;margin-bottom:16px}
.tester label{display:block;font-size:13px;color:rgba(255,255,255,.6);margin-bottom:6px}
.tester textarea{width:100%;padding:14px;background:rgba(255,255,255,.05);border:1px solid rgba(212,175,55,.2);border-radius:8px;color:#fff;font-family:'Courier New',monospace;font-size:14px;resize:vertical;min-height:120px}
.tester textarea:focus{outline:none;border-color:#D4AF37}
.presets{display:flex;gap:8px;margin:12px 0 16px;flex-wrap:wrap}
.presets button{padding:6px 14px;background:rgba(212,175,55,.1);border:1px solid rgba(212,175,55,.2);border-radius:6px;color:#D4AF37;font-size:12px;cursor:pointer}
.presets button:hover{background:rgba(212,175,55,.2)}
.result{margin-top:24px;padding:24px;border-radius:12px;display:none}
.result.show{display:block}
.result.APPROVED{background:rgba(52,211,153,.08);border:1px solid rgba(52,211,153,.3)}
.result.REJECTED{background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.3)}
.result.REVIEW{background:rgba(251,191,36,.08);border:1px solid rgba(251,191,36,.3)}
.result h3{font-size:24px;margin-bottom:8px}
.result.APPROVED h3{color:#34d399}
.result.REJECTED h3{color:#ef4444}
.result.REVIEW h3{color:#fbbf24}
.result p{color:rgba(255,255,255,.6);font-size:14px;margin-bottom:4px}
.result code{color:#D4AF37;font-size:13px}
.footer{text-align:center;padding:40px;font-size:12px;color:rgba(255,255,255,.25)}
</style>
</head>
<body>
<div class="hamburger" onclick="toggleSidebar()">‚ò∞</div>
<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>
<div class="sidebar" id="sidebar">
  <div class="logo">‚öñÔ∏è Mizan Studio</div>
  <nav>
    <a href="index.html">üè† Home</a>
    <a href="rules.html">üìã Rule Editor</a>
    <a href="decide.html" class="active">‚ö° Decision Tester</a>
    <a href="audit.html">üìä Audit Log</a>
    <a href="agents.html">ü§ñ Agent Monitor</a>
    <a href="compliance.html"><span>üá¶üá™</span> UAE Compliance</a>
    <a href="rag.html"><span>üìö</span> Knowledge Base</a>
    <a href="widget-demo.html"><span>üîå</span> Widget Demo</a>
    <a href="webhooks.html"><span>üîó</span> Webhooks</a>
    <a href="orchestration.html"><span>üîÄ</span> Multi-Agent</a>
    <a href="setup.html">‚öôÔ∏è Setup</a>
  </nav>
  <div class="version">üì¶ v1.1.0</div>
</div>
<div class="main">
  <h1>‚ö° Decision Tester</h1>
  <p class="subtitle">Submit facts and see which rules fire</p>
  <div class="tester">
    <h2>Input Facts (JSON)</h2>
    <label>Provide a JSON object with the facts to evaluate:</label>
    <textarea id="facts">{ "budget": 150000, "vendor_blacklisted": false, "entity_type": "local", "priority": "normal" }</textarea>
    <div class="presets">
      <button onclick="setPreset('approved')">‚úÖ Approved Case</button>
      <button onclick="setPreset('rejected')">‚ùå Rejected Case</button>
      <button onclick="setPreset('review')">üîç Review Case</button>
      <button onclick="setPreset('emergency')">üö® Emergency</button>
    </div>
    <button class="btn" onclick="decide()">‚ö° Evaluate Decision</button>
    <div class="result" id="result">
      <h3 id="rDecision"></h3>
      <p><strong>Rule:</strong> <span id="rRule"></span></p>
      <p><strong>Reason:</strong> <span id="rReason"></span></p>
      <p style="margin-top:8px"><code id="rId"></code></p>
    </div>
  </div>
  <div class="footer">‚öñÔ∏è Mizan Framework SDK v1.1.0 | Built by mizanuae10x</div>
</div>
<script>
function toggleSidebar(){document.getElementById('sidebar').classList.toggle('open');document.getElementById('overlay').classList.toggle('show')}
const presets={
  approved:'{ "budget": 150000, "vendor_blacklisted": false, "entity_type": "local", "priority": "normal" }',
  rejected:'{ "budget": 50000, "vendor_blacklisted": true, "entity_type": "local", "priority": "normal" }',
  review:'{ "budget": 50000, "vendor_blacklisted": false, "entity_type": "foreign", "priority": "normal" }',
  emergency:'{ "budget": 200000, "vendor_blacklisted": false, "entity_type": "local", "priority": "emergency" }'
};
function setPreset(k){document.getElementById('facts').value=presets[k]}
async function decide(){
  try{
    const facts=JSON.parse(document.getElementById('facts').value);
    const r=await fetch('/api/decide',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({facts})});
    const d=await r.json();
    const el=document.getElementById('result');
    el.className='result show '+d.decision;
    document.getElementById('rDecision').textContent=d.decision==='APPROVED'?'‚úÖ APPROVED':d.decision==='REJECTED'?'‚ùå REJECTED':'üîç REVIEW';
    document.getElementById('rRule').textContent=d.ruleName;
    document.getElementById('rReason').textContent=d.reason;
    document.getElementById('rId').textContent='Decision ID: '+d.id+' | '+d.timestamp;
  }catch(e){alert('Invalid JSON or error: '+e.message)}
}
</script>
</body>
</html>
