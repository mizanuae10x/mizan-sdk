<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Agent Monitor ‚Äî Mizan Studio</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="mobile.css">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Inter',sans-serif;background:#060C18;color:#fff;display:flex;min-height:100vh}
.sidebar{width:240px;background:#0B1F3A;padding:24px 0;display:flex;flex-direction:column;position:fixed;height:100vh;z-index:10}
.sidebar .logo{padding:0 24px 24px;font-size:22px;font-weight:700;color:#D4AF37;border-bottom:1px solid rgba(212,175,55,.2)}
.sidebar nav{flex:1;padding:16px 0}
.sidebar nav a{display:flex;align-items:center;gap:10px;padding:12px 24px;color:rgba(255,255,255,.7);text-decoration:none;font-size:14px;transition:all .2s}
.sidebar nav a:hover,.sidebar nav a.active{color:#D4AF37;background:rgba(212,175,55,.08)}
.sidebar nav a.active{border-right:3px solid #D4AF37}
.sidebar .version{padding:16px 24px;font-size:12px;color:rgba(255,255,255,.3);border-top:1px solid rgba(212,175,55,.1)}
.main{margin-left:240px;flex:1;padding:40px}
.hamburger{display:none;position:fixed;top:16px;left:16px;z-index:20;background:#0B1F3A;border:1px solid rgba(212,175,55,.3);color:#D4AF37;font-size:24px;padding:8px 12px;border-radius:8px;cursor:pointer}
.overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);z-index:9}
h1{font-size:28px;margin-bottom:8px}
.subtitle{color:rgba(255,255,255,.5);margin-bottom:24px;font-size:14px}
.btn{padding:10px 24px;background:#D4AF37;color:#0B1F3A;font-weight:600;border-radius:8px;border:none;cursor:pointer;font-size:14px}
.btn:hover{background:#c9a430}
.btn-outline{background:transparent;border:1px solid rgba(212,175,55,.4);color:#D4AF37}
.cards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;margin-bottom:24px}
.agent-card{background:rgba(11,31,58,.8);border:1px solid rgba(212,175,55,.15);border-radius:12px;padding:24px}
.agent-card h3{font-size:16px;margin-bottom:8px}
.agent-card .status{display:inline-block;padding:4px 10px;border-radius:6px;font-size:12px;font-weight:600;margin-bottom:12px}
.status-running{background:rgba(52,211,153,.15);color:#34d399}
.status-idle{background:rgba(255,255,255,.1);color:rgba(255,255,255,.5)}
.agent-card .meta{font-size:13px;color:rgba(255,255,255,.5);line-height:1.8}
.empty{text-align:center;padding:60px;color:rgba(255,255,255,.4)}
.empty .icon{font-size:64px;margin-bottom:16px}
.empty h2{font-size:20px;margin-bottom:12px;color:rgba(255,255,255,.6)}
.code-block{background:rgba(0,0,0,.4);border:1px solid rgba(212,175,55,.1);border-radius:8px;padding:20px;margin-top:20px;overflow-x:auto}
.code-block pre{color:#D4AF37;font-family:'Courier New',monospace;font-size:13px;line-height:1.6;white-space:pre}
.modal-bg{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);z-index:100;justify-content:center;align-items:center}
.modal-bg.show{display:flex}
.modal{background:#0B1F3A;border:1px solid rgba(212,175,55,.2);border-radius:16px;padding:32px;width:600px;max-width:95%}
.modal h2{font-size:20px;color:#D4AF37;margin-bottom:16px}
.modal pre{background:rgba(0,0,0,.4);border-radius:8px;padding:16px;color:#34d399;font-size:13px;line-height:1.6;overflow-x:auto}
.footer{text-align:center;padding:40px;font-size:12px;color:rgba(255,255,255,.25)}
</style>
</head>
<body>
<div class="hamburger" onclick="toggleSidebar()">‚ò∞</div>
<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>
<div class="sidebar" id="sidebar">
  <div class="logo">‚öñÔ∏è Mizan Studio</div>
  <nav>
    <a href="index.html">üè† Home</a>
    <a href="rules.html">üìã Rule Editor</a>
    <a href="decide.html">‚ö° Decision Tester</a>
    <a href="audit.html">üìä Audit Log</a>
    <a href="agents.html" class="active">ü§ñ Agent Monitor</a>
    <a href="setup.html">‚öôÔ∏è Setup</a>
  </nav>
  <div class="version">üì¶ v1.1.0</div>
</div>
<div class="main">
  <h1>ü§ñ Agent Monitor</h1>
  <p class="subtitle">Track running MizanAgents and their decisions</p>
  <div style="margin-bottom:24px">
    <button class="btn" onclick="showCreate()">+ Create Agent</button>
    <button class="btn btn-outline" onclick="loadAgents()" style="margin-left:8px">üîÑ Refresh</button>
  </div>
  <div class="cards-grid" id="agentCards"></div>
  <div id="emptyState"></div>
  <div class="footer">‚öñÔ∏è Mizan Framework SDK v1.1.0 | Built by mizanuae10x</div>
</div>
<div class="modal-bg" id="createModal">
  <div class="modal">
    <h2>Create a MizanAgent</h2>
    <p style="color:rgba(255,255,255,.5);font-size:14px;margin-bottom:16px">Use this code template to create and register a governance agent:</p>
    <pre>const { MizanAgent } = require('mizan-sdk');

const agent = new MizanAgent({
  name: 'procurement-guard',
  rules: './rules/procurement.json',
  model: 'gpt-4o-mini',
  audit: true,
  onDecision: (result) => {
    console.log(`Decision: ${result.action}`);
    console.log(`Rule: ${result.ruleName}`);
  }
});

// Start the agent
await agent.start();

// Submit a decision request
const result = await agent.decide({
  budget: 150000,
  vendor_blacklisted: false,
  entity_type: 'local'
});

console.log(result);</pre>
    <div style="margin-top:16px;text-align:right">
      <button class="btn btn-outline" onclick="hideCreate()">Close</button>
    </div>
  </div>
</div>
<script>
function toggleSidebar(){document.getElementById('sidebar').classList.toggle('open');document.getElementById('overlay').classList.toggle('show')}
function showCreate(){document.getElementById('createModal').classList.add('show')}
function hideCreate(){document.getElementById('createModal').classList.remove('show')}
async function loadAgents(){
  const agents=await(await fetch('/api/agents')).json();
  const cards=document.getElementById('agentCards');
  const empty=document.getElementById('emptyState');
  if(!agents.length){
    cards.innerHTML='';
    empty.innerHTML=`<div class="empty">
      <div class="icon">ü§ñ</div>
      <h2>No agents running yet</h2>
      <p>Create your first agent using the MizanAgent class:</p>
      <div class="code-block"><pre>const { MizanAgent } = require('mizan-sdk');

const agent = new MizanAgent({
  name: 'my-guard',
  rules: './rules.json',
  audit: true
});

await agent.start();</pre></div>
    </div>`;
    return;
  }
  empty.innerHTML='';
  cards.innerHTML=agents.map(a=>{
    const sc=a.status==='running'?'status-running':'status-idle';
    return `<div class="agent-card">
      <h3>${a.name||'Unnamed Agent'}</h3>
      <span class="status ${sc}">${a.status||'idle'}</span>
      <div class="meta">
        <div>üìä Decisions: ${a.decisions||0}</div>
        <div>üïê Last activity: ${a.lastActivity?new Date(a.lastActivity).toLocaleString():'Never'}</div>
        <div>üìã Rules loaded: ${a.rulesCount||0}</div>
      </div>
    </div>`}).join('');
}
loadAgents();
</script>
</body>
</html>
